<!doctype html>
<html lang="de" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GymBo Training Builder</title>
  <meta name="description" content="Erstelle GymBo Workout-Templates im Browser und exportiere sie als .gymbo Datei." />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://gymbo.pro/training/" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="theme-color" content="#F59E0B" />
  <meta property="og:title" content="GymBo Training Builder" />
  <meta property="og:description" content="Erstelle Workout-Templates im Browser und importiere sie direkt in GymBo auf dem iPhone." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.gymbo.pro/training/" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/training/styles.css" />
</head>
<body>
  <div class="bg-gradient"></div>
  <div class="bg-noise"></div>

  <header class="topbar">
    <div class="topbar-inner">
      <a href="/index.html" class="brand"><span>Gym</span><span class="brand-accent">Bo</span></a>
      <div class="topbar-actions">
        <div class="auth-row">
          <input id="authEmail" type="email" placeholder="E-Mail" />
          <button id="signInBtn" class="btn btn-secondary btn-sm">Login</button>
          <button id="signOutBtn" class="btn btn-secondary btn-sm" hidden>Ausloggen</button>
          <a id="moderationLink" class="btn btn-secondary btn-sm" href="/training/moderation.html" hidden>Mod</a>
        </div>
        <span id="authState" class="auth-state"></span>
      </div>
    </div>
  </header>

  <main class="page">
    <!-- Hero -->
    <section class="hero">
      <h1>Dein Workout. <span class="highlight">Dein Plan.</span></h1>
      <p class="hero-sub">Stelle dein Training zusammen und importiere es mit einem Tap in GymBo.</p>
      <p id="localOnlyHint" class="local-hint" hidden>
        Ohne Login werden Daten nur im aktuellen Browser-Tab gehalten.
      </p>
      <p id="status" class="status" aria-live="polite"></p>
    </section>

    <!-- 1. Workout konfigurieren -->
    <section class="step-section">
      <div class="step-header">
        <span class="step-number">1</span>
        <h2>Workout konfigurieren</h2>
      </div>
      <div class="config-row">
        <div class="config-field config-field-grow">
          <label for="workoutName">Name</label>
          <input id="workoutName" type="text" placeholder="z. B. Push Day" />
        </div>
        <div class="config-field">
          <label>Typ</label>
          <div class="pill-group" id="workoutTypePills">
            <button class="pill active" data-value="standard">Standard</button>
            <button class="pill" data-value="superset">Superset</button>
            <button class="pill" data-value="circuit">Circuit</button>
          </div>
        </div>
        <div class="config-field config-field-sm">
          <label for="defaultRest">Pause</label>
          <div class="rest-chip">
            <input id="defaultRest" type="number" min="30" max="300" step="5" value="90" />
            <span>Sek.</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 2. Übungen wählen -->
    <section class="step-section">
      <div class="step-header">
        <span class="step-number">2</span>
        <h2>Übungen wählen</h2>
      </div>

      <div class="filter-bar">
        <input id="searchInput" type="text" placeholder="Übung suchen..." class="search-input" />
        <button id="openCustomModalBtn" class="btn btn-secondary btn-sm">+ Eigene Übung</button>
      </div>

      <div class="chip-filters">
        <div class="chip-group" id="muscleChips">
          <span class="chip-label">Muskelgruppe</span>
        </div>
        <div class="chip-group" id="equipmentChips">
          <span class="chip-label">Equipment</span>
        </div>
      </div>

      <div id="catalogList" class="exercise-grid"></div>
    </section>

    <!-- 3. Dein Workout -->
    <section class="step-section">
      <div class="step-header">
        <span class="step-number">3</span>
        <h2>Dein Workout</h2>
        <span id="exerciseCount" class="count">0</span>
      </div>

      <ul id="workoutList" class="workout-list"></ul>

      <div class="workout-actions">
        <button id="exportBtn" class="btn btn-primary">In GymBo importieren</button>
        <button id="saveWorkoutBtn" class="btn btn-secondary">Speichern</button>
        <button id="submitWorkoutBtn" class="btn btn-secondary">Mit anderen teilen</button>
        <button id="deleteWorkoutBtn" class="btn btn-secondary" hidden>Löschen</button>
      </div>
    </section>

    <!-- 4. Meine Workouts (nur eingeloggt) -->
    <section class="step-section" id="myWorkoutsSection">
      <div class="step-header">
        <h2>Meine Workouts</h2>
        <span id="myWorkoutCount" class="count">0</span>
      </div>
      <div id="myWorkoutsList" class="exercise-grid"></div>
    </section>

    <!-- 5. Community -->
    <section class="step-section" id="community-workouts">
      <div class="step-header">
        <h2>Community-Workouts entdecken</h2>
        <span id="communityWorkoutCount" class="count">0</span>
      </div>
      <div id="communityWorkoutsList" class="exercise-grid"></div>
    </section>
  </main>

  <!-- Custom Exercise Modal -->
  <div id="customModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Eigene Übung erstellen</h3>
        <button id="closeCustomModalBtn" class="icon-btn" type="button" aria-label="Schließen">x</button>
      </div>

      <form id="customExerciseForm" class="modal-form">
        <label class="form-half">
          Name (DE)
          <input id="customName" type="text" required />
        </label>

        <label class="form-half">
          Name (EN)
          <input id="customNameEn" type="text" required />
        </label>

        <label class="form-full">
          Muskelgruppen
          <div id="customMuscles" class="check-grid"></div>
        </label>

        <label class="form-half">
          Equipment-Typ
          <select id="customEquipment"></select>
        </label>

        <label class="form-half">
          Schwierigkeitsgrad
          <select id="customDifficulty">
            <option>Anfänger</option>
            <option>Fortgeschritten</option>
            <option>Profi</option>
          </select>
        </label>

        <label class="form-half">
          Beschreibung (DE)
          <textarea id="customDescription" rows="2"></textarea>
        </label>

        <label class="form-half">
          Description (EN)
          <textarea id="customDescriptionEn" rows="2"></textarea>
        </label>

        <label class="form-half">
          Anleitung (DE, eine Zeile pro Schritt)
          <textarea id="customInstructions" rows="3"></textarea>
        </label>

        <label class="form-half">
          Instructions (EN, one line per step)
          <textarea id="customInstructionsEn" rows="3"></textarea>
        </label>

        <div class="modal-actions form-full">
          <button type="button" id="cancelCustomBtn" class="btn btn-secondary">Abbrechen</button>
          <button type="submit" class="btn btn-primary">Übung speichern</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Prompt Modal -->
  <div id="promptModal" class="modal" aria-hidden="true">
    <div class="modal-card" style="width: min(420px, calc(100vw - 24px));">
      <div class="modal-head">
        <h3 class="prompt-title"></h3>
      </div>
      <div style="display: grid; gap: 10px; margin-top: 10px;">
        <select class="prompt-select"></select>
        <input class="prompt-input" type="text" />
        <div class="modal-actions">
          <button class="btn btn-secondary" data-action="cancel">Abbrechen</button>
          <button class="btn btn-primary" data-action="confirm">Senden</button>
        </div>
      </div>
    </div>
  </div>

  <script src="/training/supabase-config.js"></script>
  <script src="/training/app.js" type="module"></script>
</body>
</html>
